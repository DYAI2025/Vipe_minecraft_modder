<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>3D Test - Texture Verification</title>
    <style>
        body { margin: 0; overflow: hidden; background: #2c3e50; }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-family: Arial;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="info">
        <h3>3D Texture Test</h3>
        <p>Testing different item types with proper materials</p>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
    <script>
        // Scene setup
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x87CEEB);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 5, 10);
        camera.lookAt(0, 0, 0);
        
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.body.appendChild(renderer.domElement);
        
        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);
        
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(10, 10, 5);
        directionalLight.castShadow = true;
        scene.add(directionalLight);
        
        // Test items with different materials
        const items = [
            {
                name: 'Sword',
                geometry: new THREE.BoxGeometry(0.2, 4, 0.1),
                material: new THREE.MeshPhysicalMaterial({
                    color: 0xc0c0c0,
                    metalness: 0.9,
                    roughness: 0.2,
                    emissive: 0xff4500,
                    emissiveIntensity: 0.3
                }),
                position: [-4, 0, 0]
            },
            {
                name: 'Diamond Block',
                geometry: new THREE.BoxGeometry(2, 2, 2),
                material: new THREE.MeshPhysicalMaterial({
                    color: 0x00ffff,
                    metalness: 0.4,
                    roughness: 0.1,
                    clearcoat: 1.0,
                    clearcoatRoughness: 0.1
                }),
                position: [0, 0, 0]
            },
            {
                name: 'TNT',
                geometry: new THREE.BoxGeometry(2, 2, 2),
                material: [
                    new THREE.MeshStandardMaterial({ color: 0xff0000 }), // right
                    new THREE.MeshStandardMaterial({ color: 0xffffff }), // left
                    new THREE.MeshStandardMaterial({ color: 0xff0000 }), // top
                    new THREE.MeshStandardMaterial({ color: 0xffffff }), // bottom
                    new THREE.MeshStandardMaterial({ color: 0xff0000 }), // front
                    new THREE.MeshStandardMaterial({ color: 0xffffff })  // back
                ],
                position: [4, 0, 0]
            }
        ];
        
        // Add items to scene
        items.forEach(item => {
            const mesh = new THREE.Mesh(item.geometry, item.material);
            mesh.position.set(...item.position);
            mesh.castShadow = true;
            mesh.receiveShadow = true;
            scene.add(mesh);
            
            // Add label
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 256;
            canvas.height = 64;
            context.fillStyle = 'white';
            context.font = '24px Arial';
            context.fillText(item.name, 10, 40);
            
            const texture = new THREE.CanvasTexture(canvas);
            const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
            const sprite = new THREE.Sprite(spriteMaterial);
            sprite.scale.set(2, 0.5, 1);
            sprite.position.set(item.position[0], item.position[1] + 2, item.position[2]);
            scene.add(sprite);
        });
        
        // Ground
        const groundGeometry = new THREE.PlaneGeometry(20, 20);
        const groundMaterial = new THREE.MeshStandardMaterial({ 
            color: 0x228b22,
            roughness: 0.8
        });
        const ground = new THREE.Mesh(groundGeometry, groundMaterial);
        ground.rotation.x = -Math.PI / 2;
        ground.position.y = -2;
        ground.receiveShadow = true;
        scene.add(ground);
        
        // Animation
        function animate() {
            requestAnimationFrame(animate);
            
            // Rotate items
            scene.children.forEach(child => {
                if (child instanceof THREE.Mesh && child !== ground) {
                    child.rotation.y += 0.01;
                }
            });
            
            renderer.render(scene, camera);
        }
        
        animate();
        
        // Handle resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>