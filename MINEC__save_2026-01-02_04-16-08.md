# Task Breakdown by File (Patch Plan v1)  Status: Draft v1 Owner: Core Team Last updated: 2026-01-02  This document translates the assembly checklist into "per file: exact changes". It is meant to be actionable for implementation work.  Contracts referenced: - docs/contracts/project-json-spec-v1.md - docs/contracts/ipc-bridge-spec-v1.md - docs/contracts/exporter-manifest-v1.md - docs/contracts/assembly-plan.md  Legend: - (P0) must-have for MVP - (P1) strongly recommended - (P2) nice-to-have / later - DoD = definition of done  ============================================================ A) CORE MODEL (packages/core-model) ============================================================  ------------------------------------------------------------ A1) packages/core-model/src/schema.ts  (P0) ------------------------------------------------------------  Goal: - Implement the full Zod schema exactly matching Project JSON Spec v1.  Exact changes: - [ ] Define regex schemas:   - EntityId: ^[a-z0-9_]+$   - ModId: ^[a-z][a-z0-9_]{1,63}$   - NamespacedRef: ^[a-z0-9_]+:[a-z0-9_/]+$ - [ ] Define TextureSpec union:   - { source: "preset", value: string }   - { source: "dataUri", value: string } - [ ] Define BlockSpec:   - id, name   - properties: hardness (number), luminance (number), transparent (boolean)   - texture: TextureSpec - [ ] Define ItemSpec:   - id, name   - itemType enum: "gem" | "sword" | "tool" | "food"   - properties: maxStackSize, attackDamage   - texture - [ ] Define RecipeSpec (shaped only):   - id   - type: literal "shaped"   - pattern: array of 1..3 strings   - key: record<string, NamespacedRef>   - result: { item: NamespacedRef, count: number } - [ ] Define ProjectFile:   - schemaVersion: literal 1   - meta: modId/name/version required; optional author/description/createdAt/updatedAt   - blocks/items/recipes: record keyed by EntityId with matching spec  Rules to encode (schema-level, not semantic): - [ ] pattern items are strings length 1..3 (semantic char rules can be in validate.ts) - [ ] count is number, min 1 max 64 - [ ] luminance is number min 0 max 15 (schema-level clamp) - [ ] maxStackSize is number min 1 max 64  DoD: - [ ] No placeholders remain in this file. - [ ] `pnpm -C packages/core-model test` passes schema tests.  ------------------------------------------------------------ A2) packages/core-model/src/validate.ts  (P0) ------------------------------------------------------------  Goal: - Semantic validation (refs, invariants, texture rules).  Exact changes: - [ ] Export function:   - `validateProject(input: unknown): { ok: true; project: ProjectFile; warnings: string[] } | { ok: false; errors: ValidationError[] }` - [ ] Define `ValidationError` shape (stable for UI):   - code: "E_VALIDATION"   - path: string (json pointer-ish, e.g. "/recipes/r1/key/R")   - message: string   - details?: string - [ ] Steps:   1) Zod parse with ProjectFile schema:      - if fail -> map zod issues to ValidationError[]   2) Invariants:      - for each blocks/items/recipes entry:        - key must equal value.id (if not: either error or auto-fix + warning; choose one)   3) Texture:      - preset -> value in allowlist (rock/wood/gem/metal/grass/sand)      - dataUri -> must start with "data:image/png;base64,"   4) Recipe semantics:      - allowed chars in pattern: A-Z0-9 or space      - every non-space char must exist in key      - every key value:        - namespace == "minecraft" is allowed        - namespace == meta.modId must exist in blocks or items (by id)      - result.item:        - minecraft:* allowed        - if namespace == meta.modId must exist (block or item)   5) Optional: no duplicate ids across blocks/items (recommended v1):      - if same id used in both -> error  DoD: - [ ] Invalid refs produce readable errors with stable paths. - [ ] validateProject passes the full example from project-json-spec-v1.md.  ------------------------------------------------------------ A3) packages/core-model/src/actions.ts  (P0) ------------------------------------------------------------  Goal: - Remove placeholders, make action payloads explicit and type-safe.  Exact changes: - [ ] Define action types:   - UPDATE_META: { key, value } or { meta: Partial<meta> }   - CREATE_BLOCK / UPDATE_BLOCK / DELETE_BLOCK   - CREATE_ITEM / UPDATE_ITEM / DELETE_ITEM   - CREATE_RECIPE / UPDATE_RECIPE / DELETE_RECIPE   - LOAD_PROJECT: { project: ProjectFile }   - UNDO, REDO - [ ] Decide ID policy:   - Option A (recommended): IDs immutable     - Remove any UPDATE_* that tries to change id OR handle it by rejecting in reducer   - Option B: add explicit RENAME_* actions with safe ref update semantics  DoD: - [ ] No `any` usage required for these actions. - [ ] Reducer compiles strictly.  ------------------------------------------------------------ A4) packages/core-model/src/reducer.ts  (P0) ------------------------------------------------------------  Goal: - Deterministic domain updates + undo/redo history.  Exact changes: - [ ] Define types:   - AppState: { project: ProjectFile; lastAction: KidAction | null; history: { past: ProjectFile[]; future: ProjectFile[] } } - [ ] Implement `projectReducer(project, action)`:   - CREATE_*: insert into correct record at key id   - UPDATE_*: patch fields (but not id if immutable)   - DELETE_*: delete record by id   - LOAD_PROJECT: replace project - [ ] Implement `rootReducer(state, action)` with history:   - On domain-changing actions:     - push current project into past     - clear future     - apply projectReducer     - enforce history limit (e.g. 50)   - UNDO:     - if past empty: no-op     - move current -> future     - pop past -> current   - REDO:     - if future empty: no-op     - move current -> past     - shift future -> current   - Non-domain actions: should not mutate project  Special handling: - [ ] If Option A (ids immutable):   - In UPDATE_* reject attempts to change id:     - either ignore id field in payload     - or return same project + set lastAction to an error-ish action (your choice) - [ ] If Option B:   - RENAME_* must:     - move record key     - update any recipe refs that point to old id (namespace meta.modId)  DoD: - [ ] Reducer tests cover:   - create/update/delete   - undo/redo stack correctness   - load_project resets history or defines expected behavior (choose + test)  ------------------------------------------------------------ A5) packages/core-model/src/parser.ts  (P1) ------------------------------------------------------------  Goal: - Parser never throws and returns structured result.  Exact changes: - [ ] Define:   - `parse(text: string, modId?: string): { action: KidAction | null; confidence: number; error?: string }` - [ ] Guard against empty/huge strings (trim, clamp length) - [ ] Update tests to reflect minimal supported commands  DoD: - [ ] Parser tests pass. - [ ] parse("") returns { action:null, confidence:0 }.  ------------------------------------------------------------ A6) packages/core-model/src/explain.ts  (P1) ------------------------------------------------------------  Goal: - Explain strings align with actions and never throw.  Exact changes: - [ ] Map each action to a friendly message - [ ] Default: "I am ready!" or similar, no crash  DoD: - [ ] explain tests pass.  ------------------------------------------------------------ A7) packages/core-model tests  (P0) ------------------------------------------------------------  Files: - packages/core-model/src/__tests__/schema.test.ts - packages/core-model/src/__tests__/reducer.test.ts - packages/core-model/src/__tests__/parser.test.ts - packages/core-model/src/__tests__/explain.test.ts - (add) packages/core-model/src/__tests__/validate.test.ts  Exact changes: - [ ] Add validation test cases:   - invalid modId   - invalid entity id   - recipe with missing key char   - recipe ref to missing mod item   - invalid dataUri prefix   - preset not in allowlist - [ ] Ensure deterministic ordering where needed  DoD: - [ ] `pnpm -C packages/core-model test` green.  ============================================================ B) ELECTRON MAIN + PRELOAD (apps/studio-electron) ============================================================  ------------------------------------------------------------ B1) apps/studio-electron/src/main/workspace.ts  (P0) ------------------------------------------------------------  Goal: - Sandbox path joins and enforce no escape.  Exact changes: - [ ] Keep/confirm:   - `safeJoin(root, ...parts): string` throws on traversal   - `assertInWorkspace(root, target): void` - [ ] Add tests if missing edge cases:   - root + "../x" rejected   - symlink handling (optional P2)  DoD: - [ ] workspace tests pass.  ------------------------------------------------------------ B2) apps/studio-electron/src/main/ipc.ts  (P0) ------------------------------------------------------------  Goal: - Implement save/load per IPC Spec v1, remove stubs for those.  Exact changes: - [ ] Import validateProject from core-model (compiled build path must work). - [ ] Implement `dialog:selectWorkspace` returns {ok:true, dir|null} - [ ] Implement `project:save`:   - input: { workspaceDir, project }   - validate workspaceDir present, else E_WORKSPACE_REQUIRED   - run validateProject(project), else E_VALIDATION   - path = safeJoin(workspaceDir, "project.json")   - atomic write:     - write to "project.json.tmp"     - rename to "project.json"   - return ok - [ ] Implement `project:load`:   - read safeJoin(workspaceDir,"project.json")   - JSON.parse, validateProject   - return { ok:true, project }   - missing file -> E_NOT_FOUND - [ ] Return envelope:   - { ok:true, ... } or { ok:false, error:{code,message,details?} }  Optional cleanups: - [ ] (P1) Remove or clearly mark ops:* stubs in code comments - [ ] (P2) Add basic input clamps (string length)  DoD: - [ ] Save/Load works end-to-end in Electron app.  ------------------------------------------------------------ B3) apps/studio-electron/src/preload/bridge.ts  (P1, but security-relevant) ------------------------------------------------------------  Goal: - Enforce a strict API surface and typed returns.  Exact changes: - [ ] Implement channel allowlist enforcement:   - Only allow the channels in ipc-bridge-spec-v1.md - [ ] Wrap invoke results and return the envelope directly to renderer - [ ] Ensure `onBuildProgress(cb)` returns unsubscribe function:   - call ipcRenderer.removeListener on unsubscribe - [ ] (Optional P2) runtime type guards on responses  DoD: - [ ] Unknown channels cannot be used.  ------------------------------------------------------------ B4) apps/studio-electron/src/main/buildService.ts  (P0) ------------------------------------------------------------  Goal: - Pipeline start validates project and reports consistent progress.  Exact changes: - [ ] On pipeline:start:   - validateProject(project) before doing anything   - if invalid -> return {ok:false, error:E_VALIDATION} - [ ] Generate runId (timestamp+random or uuid) - [ ] Use deterministic status messages:   - export: "Exporting your mod..."   - build: "Building your mod..."   - test: "Testing your mod..."   - done: "All done!"   - error: "Something went wrong." - [ ] Always emit `pipeline:progress` with {runId, status} - [ ] Ensure temp dir cleanup (best-effort) - [ ] Error mapping:   - exporter errors -> E_BUILD_FAILED or E_IO depending on stage   - testbot errors -> E_TEST_FAILED  Optional: - [ ] (P1) pipeline:cancel support: keep child proc handles  DoD: - [ ] UI BuildDialog stepper behaves correctly and never stalls.  ------------------------------------------------------------ B5) apps/studio-electron/src/main/helpService.ts  (P1) ------------------------------------------------------------  Goal: - Keep stable, add small improvements.  Exact changes: - [ ] Clamp query length - [ ] Limit results (default 5) - [ ] Ensure excerpt is safe and short  DoD: - [ ] help search returns consistent results.  ============================================================ C) RENDERER (apps/studio-electron/src/renderer) ============================================================  ------------------------------------------------------------ C1) apps/studio-electron/src/renderer/types/bridge.d.ts  (P0) ------------------------------------------------------------  Goal: - Make window.KidMod types match IPC Spec v1 exactly.  Exact changes: - [ ] Define IpcResult, IpcError, PipelineStatus, HelpResult, ProjectFile types - [ ] Define window.KidMod interface:   - selectWorkspaceDir(): Promise<IpcResult<{dir:string|null}>>   - saveProject(workspaceDir, project): Promise<IpcResult<{ }>>   - loadProject(workspaceDir): Promise<IpcResult<{ project: ProjectFile }>>   - searchHelp(query, limit?): Promise<IpcResult<{ results: HelpResult[] }>>   - startBuildPipeline(project): Promise<IpcResult<{ runId: string }>>   - onBuildProgress(cb): () => void   - cancelBuildPipeline?(runId): Promise<IpcResult<{ }>>  DoD: - [ ] TS compile with no any casts for IPC.  ------------------------------------------------------------ C2) apps/studio-electron/src/renderer/state/persistence.ts  (P0) ------------------------------------------------------------  Goal: - Wrap IPC envelope and expose ergonomic functions.  Exact changes: - [ ] Implement:   - `selectWorkspace(): Promise<string|null>` (handles ok/fail internally)   - `saveProjectToDisk(dir, project): Promise<void>` throws with friendly error   - `loadProjectFromDisk(dir): Promise<ProjectFile>` throws with friendly error - [ ] Convert IpcFail into thrown Error with message and details accessible - [ ] Keep mockBridge only for browser demo (explicit flag):   - If window.KidMod missing -> mock   - Otherwise real  DoD: - [ ] Save/Load error messages are shown via toasts by callers.  ------------------------------------------------------------ C3) apps/studio-electron/src/renderer/state/ProjectContext.tsx  (P0) ------------------------------------------------------------  Goal: - Make save/load UX robust and aligned with contracts.  Exact changes: - [ ] On save:   - If no workspaceDir -> prompt selectWorkspace (or toast + call selectWorkspace)   - Call saveProjectToDisk   - Toast success/fail - [ ] On load:   - Same workspace guard   - loadProjectFromDisk -> dispatch LOAD_PROJECT(project)   - Toast success/fail  DoD: - [ ] Users cannot silently fail save/load.  ------------------------------------------------------------ C4) apps/studio-electron/src/renderer/ui/EditorPanel.tsx  (P0 if IDs immutable) ------------------------------------------------------------  Goal: - Prevent broken references by disallowing ID edits (recommended).  Exact changes: - [ ] Make ID field read-only or remove it from editable form - [ ] Provide "Duplicate" + "Delete" actions instead of editing IDs - [ ] If you must allow rename (Option B):   - Use explicit RENAME_* action and run a "ref update" in reducer  DoD: - [ ] Editing does not break recipes/exports.  ------------------------------------------------------------ C5) apps/studio-electron/src/renderer/ui/BuildDialog.tsx  (P0) ------------------------------------------------------------  Goal: - Handle pipeline envelopes and show details.  Exact changes: - [ ] When starting:   - call startBuildPipeline(project)   - if fail -> show error toast and keep dialog stable - [ ] Subscribe to progress events and filter by runId - [ ] On error status:   - show user message   - optional "Show details" panel with status.details  DoD: - [ ] Stepper transitions are correct and resilient to errors.  ------------------------------------------------------------ C6) apps/studio-electron/src/renderer/ui/Preview3D.tsx and utils/TextureGenerator.ts  (P1) ------------------------------------------------------------  Goal: - Make textures export-friendly (prefer dataUri persisted).  Exact changes: - [ ] Ensure TextureGenerator always returns PNG dataUri - [ ] When user picks a preset:   - store texture as dataUri (recommended)   - OR store preset + exporter handles preset (harder)  DoD: - [ ] Exporter can write textures for every entity.  ============================================================ D) EXPORTER (packages/exporter) ============================================================  ------------------------------------------------------------ D1) packages/exporter/src/index.ts  (P0) ------------------------------------------------------------  Goal: - Make exportProject deterministic and manifest-complete.  Exact changes: - [ ] Define:   - `exportProject(opts: { outputDir: string; project: ProjectFile }): Promise<{ ok:true } | { ok:false; error: ExportError }>`   - Or throw errors with stable mapping (choose one approach) - [ ] Steps:   1) copy template -> outputDir   2) replace placeholders in:      - fabric.mod.json      - TemplateMod.java      - build.gradle/settings/gradle.properties if needed   3) rename mixin.json -> <modId>.mixins.json (if used)   4) write generated files:      - lang      - blockstates      - models      - textures      - ModRegistry.java   5) ensure dirs exist - [ ] Determinism:   - sort keys when writing JSON   - no timestamps inside generated files  DoD: - [ ] Exported output matches exporter-manifest-v1.md structure.  ------------------------------------------------------------ D2) packages/exporter/src/generators/assets.ts  (P0) ------------------------------------------------------------  Goal: - Convert dataUri to PNG bytes reliably.  Exact changes: - [ ] `dataUriToBuffer(dataUri: string): Buffer`   - validate prefix "data:image/png;base64,"   - decode base64   - if invalid -> return fallback 1x1 png buffer (or throw; choose one) - [ ] Prefer throwing for invalid textures if you want strictness.   - If throwing, ensure main pipeline converts to E_VALIDATION or E_BUILD_FAILED.  DoD: - [ ] Unit tests cover valid/invalid inputs.  ------------------------------------------------------------ D3) packages/exporter/src/generators/json.ts  (P0) ------------------------------------------------------------  Goal: - Generate lang/models/blockstates per manifest.  Exact changes: - [ ] Implement functions:   - generateLang(project): object   - generateBlockstate(modId, blockId): object   - generateBlockModel(modId, blockId): object   - generateBlockItemModel(modId, blockId): object   - generateItemModel(modId, itemId): object - [ ] Ensure correct paths and stable JSON formatting.  DoD: - [ ] Snapshot tests for generated JSON.  ------------------------------------------------------------ D4) packages/exporter/src/generators/java.ts  (P0) ------------------------------------------------------------  Goal: - Generate ModRegistry.java and optionally main class updates.  Exact changes: - [ ] Implement deterministic package naming:   - `com.kidmodstudio.<modId>` - [ ] Registry:   - blocks + block items + items - [ ] Property mapping:   - hardness -> strength()   - luminance -> luminance()   - transparent -> nonOpaque()  DoD: - [ ] Java compiles in Gradle build.  ------------------------------------------------------------ D5) packages/exporter/src/builder.ts  (P1) ------------------------------------------------------------  Goal: - runBuild robust across OS.  Exact changes: - [ ] Detect gradlew:   - win: gradlew.bat   - unix: ./gradlew - [ ] Ensure executable bit on unix - [ ] spawn "build" - [ ] Collect stdout/stderr logs - [ ] Find jar path under build/libs/*.jar  DoD: - [ ] runBuild returns jarPath on success.  ------------------------------------------------------------ D6) packages/exporter/template/*  (P1) ------------------------------------------------------------  Goal: - Template is self-contained and buildable.  Exact changes: - [ ] Ensure wrapper files exist (gradle/wrapper) - [ ] Ensure fabric.mod.json placeholders align with index.ts replacer - [ ] Ensure TemplateMod.java is minimal and calls registry  DoD: - [ ] Export output builds without external gradle install.  ------------------------------------------------------------ D7) Exporter tests  (P0) ------------------------------------------------------------  Files: - packages/exporter/src/__tests__/exporter.test.ts - packages/exporter/src/__tests__/full_export.test.ts - packages/exporter/src/__tests__/runner.test.ts  Exact changes: - [ ] Assert file tree exists:   - fabric.mod.json, assets, models, textures, ModRegistry.java - [ ] Assert placeholder replacements are correct - [ ] (Optional) Skip real gradle build in CI, but keep local e2e script  DoD: - [ ] `pnpm -C packages/exporter test` green.  ============================================================ E) TESTBOT (packages/testbot) ============================================================  ------------------------------------------------------------ E1) packages/testbot/src/runner.ts  (P0) ------------------------------------------------------------  Goal: - runServer smoke test with timeout + log capture.  Exact changes: - [ ] Implement:   - `runTest(projectDir: string, task = "runServer"): Promise<{ ok:true; logs:string } | { ok:false; reason:string; logs:string }>` - [ ] Use child_process spawn with:   - cwd = projectDir   - env pass-through - [ ] Timeout (e.g. 180s):   - kill process tree (best effort)   - return ok:false reason:"timeout" - [ ] Stream logs into buffer (cap size, e.g. 1-5MB)  DoD: - [ ] No placeholders remain. - [ ] Unit tests cover timeout path (mocked).  ------------------------------------------------------------ E2) packages/testbot/src/analyzer.ts  (P0) ------------------------------------------------------------  Goal: - Determine success/failure from logs.  Exact changes: - [ ] Implement:   - `analyze(logs: string): { ok: true } | { ok:false; reason: string; snippet?: string }` - [ ] Success heuristics (examples):   - contains "Done (" and "For help, type" - [ ] Failure heuristics (examples):   - "Exception in thread"   - "Mixin apply failed"   - "Incompatible mod set"   - "ERROR" patterns (careful: false positives) - [ ] Provide a short snippet around the match  DoD: - [ ] analyzer tests pass.  ------------------------------------------------------------ E3) packages/testbot tests  (P0) ------------------------------------------------------------  Files: - packages/testbot/src/__tests__/testbot.test.ts  Exact changes: - [ ] Add test cases:   - logs with Done -> ok true   - logs with exception -> ok false   - logs with mixin -> ok false  DoD: - [ ] `pnpm -C packages/testbot test` green.  ============================================================ F) OPTIONAL QUALITY / SECURITY UPGRADES ============================================================  ------------------------------------------------------------ F1) apps/studio-electron/src/main/index.ts  (P2) ------------------------------------------------------------  Ideas: - [ ] Consider enabling sandbox or tightening BrowserWindow prefs - [ ] Document why sandbox is false if kept  ------------------------------------------------------------ F2) apps/studio-electron/src/main/helpService.ts  (P2) ------------------------------------------------------------  Ideas: - [ ] Better ranking (title hits > tag hits > body hits) - [ ] Highlight query terms in excerpt  ============================================================ G) SMOKE COMMANDS (developer workflow) ============================================================  Recommended commands to add (root package.json scripts) (P1): - [ ] `smoke:core` -> `pnpm -C packages/core-model test` - [ ] `smoke:export` -> run exporter tests - [ ] `smoke:app` -> build electron/renderer (no packaging) - [ ] `smoke:pipeline` -> optional local-only: export -> gradlew build  DoD: - [ ] New dev can run 1-2 commands to verify basic health.  ============================================================ H) MVP ACCEPTANCE TEST (manual) ============================================================  A minimal end-to-end test that must pass (P0): - [ ] Launch app - [ ] Select workspace - [ ] Create 1 block + 1 item - [ ] Save - [ ] Restart app - [ ] Load (project restored) - [ ] Run pipeline:   - export step shown   - build step shown   - done or clear error shown - [ ] Export output contains textures/models/lang and builds via gradlew (local)  End. Wenn du willst, kann ich jetzt als naechsten Schritt noch eine zusaetzliche, ultra-praktische Datei machen: docs/contracts/error-catalog-v1.md (alle Fehlercodes, user messages, developer details, wie sie im UI angezeigt werden).  Du: ja 3.PHASE-D.R.A._Deep-Reasoning-Analyst sagte: # Error Catalog v1 (IPC + Domain + Export + Pipeline)  Status: Draft v1 Owner: Core Team Last updated: 2026-01-02  This catalog defines: - Error codes (stable) - User-facing messages (kid-friendly) - Developer details (logs/snippets) - UI display rules (toast/dialog/details)  Applies to: - validateProject (domain) - IPC save/load/help/pipeline - exporter build - testbot run/analyze - buildService orchestration  ------------------------------------------------------------ 0) UI Display Rules (must) ------------------------------------------------------------  General: - Always show a short, friendly message. - Never show raw stack traces by default. - Provide an optional "Show details" expander for developers/parents.  Where to show: - Save/Load -> toast (top-right) - Pipeline -> BuildDialog step + error banner + optional details panel - Help -> no error unless it breaks; fallback "No results"  Payload fields: - `message` (user-friendly) - `details` (dev-only: logs, snippet, stack, path)  Recommended UI behavior: - If error.code == E_VALIDATION:   - show "Fix something in your mod first" + highlight hints if available - If E_WORKSPACE_REQUIRED:   - show "Pick a folder first" and open folder picker button - If E_BUILD_FAILED/E_TEST_FAILED:   - show "Build failed" / "Test failed" and keep progress history visible  ------------------------------------------------------------ 1) Error envelope (IPC) ------------------------------------------------------------  All IPC failures: ```ts { ok: false, error: { code, message, details? } } Notes:  code MUST be one of the codes below.  message MUST be safe for kids (no scary jargon).  details MAY contain logs/snippets.  Canonical error codes  List:  E_BAD_REQUEST  E_WORKSPACE_REQUIRED  E_PATH_TRAVERSAL  E_NOT_FOUND  E_VALIDATION  E_IO  E_PIPELINE_RUNNING  E_BUILD_FAILED  E_TEST_FAILED  E_UNKNOWN  Code-by-code specification  ============================================================ E_BAD_REQUEST When:  IPC payload is missing required fields or has wrong types.  Example: project:save called without workspaceDir or project.  User message (default):  "Hmm, I did not understand that request."  Alternative messages:  "Oops! Something was sent in a weird way."  Developer details:  Which field was missing/wrong, e.g. "workspaceDir missing"  Optionally JSON schema validation output  UI:  Toast (error)  Retry guidance:  Usually retry after fixing code, not user action.  ============================================================ E_WORKSPACE_REQUIRED When:  User tries to save/load/export/pipeline without selecting a workspace folder.  User message:  "Pick a folder first so I know where to save your mod!"  Developer details:  none required (optional: "workspaceDir null")  UI:  Toast + show a button "Choose folder"  If possible: auto-open folder picker  Retry guidance:  User selects folder then retries automatically.  ============================================================ E_PATH_TRAVERSAL When:  Any file path tries to escape workspace root.  safeJoin/assertInWorkspace rejects.  User message:  "I can only save inside your chosen folder."  Developer details:  attempted path, root path  UI:  Toast (error)  Retry guidance:  No direct retry; user must pick a different folder or fix request.  ============================================================ E_NOT_FOUND When:  project.json is missing on load.  help docs file missing (optional usage).  expected build artifact missing (jar not found) can also map here, but prefer E_BUILD_FAILED.  User message:  For load: "I could not find a saved project in this folder."  For help: "I could not find that help page."  Developer details:  missing file path  UI:  Toast (error) for load  Help: show "No results" (not necessarily toast)  Retry guidance:  User picks correct folder or saves first.  ============================================================ E_VALIDATION When:  validateProject fails (schema or semantic checks).  Example: invalid modId, recipe references missing item, texture invalid.  User message (default):  "Something in your mod needs fixing before we can continue."  Kid-friendly variants:  "Oops! One part of your mod does not make sense yet."  "Fix the highlighted parts and try again."  Developer details:  List of validation errors with paths, e.g.:  "/meta/modId: must match ^[a-z][a-z0-9_]{1,63}$"  "/recipes/r1/key/R: points to missing item"  UI:  Toast (error)  If pipeline: show error in BuildDialog with a compact list of issues (if available)  Retry guidance:  User edits project, then retry.  Mapping rules:  Domain validateProject errors MUST map to E_VALIDATION at IPC boundary.  ============================================================ E_IO When:  File system read/write errors (permissions, disk full).  Template copy fails, temp dir creation fails.  User message:  "I could not read or write files on your computer."  Kid-friendly variants:  "I cannot save right now. Maybe your folder is locked?"  Developer details:  OS error message, errno, path  UI:  Toast (error)  Pipeline: error banner + details  Retry guidance:  Try a different folder, check permissions, retry.  ============================================================ E_PIPELINE_RUNNING When:  pipeline:start called while a previous run is active (if no concurrency allowed).  User message:  "I am already building your mod. Let's finish that first!"  Developer details:  active runId and start time  UI:  Toast (warning) or in-dialog notice  Retry guidance:  Wait for pipeline to finish or cancel (if implemented).  ============================================================ E_BUILD_FAILED When:  Gradle build step fails (non-zero exit).  jar artifact not found after build.  Java compile errors.  User message:  "Your mod did not build. Let's fix it!"  Kid-friendly variants:  "I tried to build it, but something broke."  Developer details:  exit code  last N lines of build logs (e.g. last 200 lines)  jar search results  UI:  BuildDialog: step "build" marked failed  Details panel shows log snippet  Retry guidance:  Fix project (or exporter bug) and retry.  ============================================================ E_TEST_FAILED When:  runServer task fails or crashes.  timeout reached.  analyzer finds crash patterns.  User message:  "Your mod built, but the test world did not start."  Kid-friendly variants:  "It built, but it crashed when starting the game."  Developer details:  reason: "timeout" | "crash-pattern" | "exit-code"  analyzer snippet around error line  full logs available in details (optional capped)  UI:  BuildDialog: step "test" failed  Show reason + snippet  Retry guidance:  Fix and retry; if timeout, suggest lowering complexity or increasing timeout (dev).  ============================================================ E_UNKNOWN When:  Anything unexpected not mapped to above.  User message:  "Something unexpected happened."  Kid-friendly variants:  "Uh oh. I got confused. Let's try again."  Developer details:  stack trace (dev only)  context: which handler and which step  UI:  Toast + details expander  Retry guidance:  Retry once; if repeats, file a bug.  Domain Validation Error Details (recommended shape)  Even though IPC uses IpcError, E_VALIDATION should include structured details in details OR return a separate issues array (optional extension).  Recommended internal shape (not necessarily part of IPC spec unless you extend it):  type ValidationIssue = {   path: string;     // e.g. "/recipes/r1/key/R"   message: string;  // human readable }; Renderer display:  Show up to 5 issues inline  Provide "Show all" if more  Pipeline status message guidelines  Step messages should be short and consistent:  export:  message: "Exporting your mod..."  details: "Writing files and textures"  build:  message: "Building your mod..."  details: "Running Gradle build"  test:  message: "Testing your mod..."  details: "Starting a test server"  done:  message: "All done! Your mod is ready."  details: jar path (dev only)  error:  message: (from mapped error above)  details: logs/snippet (dev)  Mapping table (source -> IPC code)  validateProject failure -> E_VALIDATION JSON parse error on load -> E_VALIDATION (message: "Saved file looks broken") FS permission/disk -> E_IO safeJoin/assertInWorkspace -> E_PATH_TRAVERSAL missing project.json -> E_NOT_FOUND gradle exit != 0 -> E_BUILD_FAILED jar missing -> E_BUILD_FAILED runServer timeout -> E_TEST_FAILED analyzer crash pattern -> E_TEST_FAILED unexpected exception -> E_UNKNOWN  Minimal user message translations (DE)  If you want German UI text:  E_WORKSPACE_REQUIRED:  "Bitte waehle zuerst einen Ordner, damit ich weiss, wo ich speichern soll!"  E_NOT_FOUND (load):  "Ich finde in diesem Ordner kein gespeichertes Projekt."  E_VALIDATION:  "In deinem Mod stimmt etwas noch nicht. Bitte repariere es und versuch es nochmal."  E_BUILD_FAILED:  "Dein Mod konnte nicht gebaut werden. Lass uns das reparieren!"  E_TEST_FAILED:  "Dein Mod wurde gebaut, aber der Test hat nicht gestartet."  E_IO:  "Ich kann gerade keine Dateien lesen oder schreiben."  E_UNKNOWN:  "Da ist etwas Unerwartetes passiert."  End.